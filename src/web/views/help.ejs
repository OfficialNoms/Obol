<%- include('partials/header'); %>

<%
  // Helper function to create an expandable FAQ item, inspired by Ticketbox
  const faqItem = (question, answer) => {
%>
    <div x-data="{ open: false }" class="bg-bg-light/50 rounded-lg border border-gray-700/50">
        <h2>
            <button @click="open = !open" type="button" class="flex items-center justify-between w-full p-5 font-medium text-left text-gray-300 hover:bg-gray-700/20">
                <span><%- question %></span>
                <svg class="w-3 h-3 transform transition-transform" :class="{ 'rotate-180': open }" fill="none" viewBox="0 0 10 6" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5 5 1 1 5"/></svg>
            </button>
        </h2>
        <div x-show="open" x-transition class="p-5 border-t border-gray-700/50">
            <div class="prose prose-invert max-w-none prose-p:text-gray-400 prose-strong:text-gray-300">
                <%- answer %>
            </div>
        </div>
    </div>
<%
  }
%>

<div class="prose prose-invert max-w-none">
    <h1>Help & FAQ</h1>
    <p class="text-gray-400">Find answers to common questions about setting up and using Obol.</p>

    <h2>First-Time Setup</h2>
    <ol>
        <li><strong>Invite the Bot:</strong> Use the "Add Server" button on the dashboard to invite Obol to your Discord server.</li>
        <li><strong>Log in to the Web Panel:</strong> Use the "Login" button to access the admin dashboard.</li>
        <li><strong>Configure Manager Roles:</strong> On your server's page, add roles to the "Bot Manager Roles" section. You can also use the <code>/config set key:manager_roles value:@YourRole</code> command.</li>
        <li><strong>Create a Game:</strong> Use the <code>/game create</code> command or the "Create New Game" form on the web panel to create your first token set (e.g., "Player Tokens").</li>
        <li><strong>Set Game Permissions:</strong> In the game's settings on the web panel, configure which roles can grant or manage tokens for that specific game.</li>
    </ol>
</div>

<div class="mt-12">
    <h2 class="text-2xl font-bold mb-4">Frequently Asked Questions</h2>
    <div class="space-y-4">
        <%- faqItem(
            'How do I check my token balance?',
            '<p>Use the <code>/balance</code> command in any channel. It will show you a private list of all your token balances for every game in the server.</p>'
        ) %>
        <%- faqItem(
            'How do I grant tokens to a user?',
            '<p>If you have the "Granter" role for a game, you can use the <code>/token grant</code> command or the "Token Actions" form in the web panel.</p>'
        ) %>
        <%- faqItem(
            `What's the difference between a "Bot Manager" and a "Game Manager"?`,
            `<p><strong>Bot Managers</strong> are configured per-server (in "Guild-Wide Settings") and can create, delete, and manage ALL games in that server. They are server-level administrators for the bot.</p><p><strong>Game Managers</strong> are configured per-game. They can't create new games, but they can manage the settings and set token balances for the specific games they are assigned to.</p>`
        ) %>
    </div>
</div>

<%- include('partials/footer'); %>